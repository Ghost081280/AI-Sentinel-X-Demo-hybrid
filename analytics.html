<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Security Analytics | AI Sentinel-X</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #00ff88;
            --secondary: #00ccff;
            --accent: #7c3aed;
            --danger: #ff0044;
            --warning: #ffaa00;
            --success: #00ff88;
            --bg-dark: #0a0e1a;
            --bg-darker: #060912;
            --bg-card: rgba(10, 20, 40, 0.8);
            --border: rgba(0, 255, 136, 0.2);
            --text-primary: #ffffff;
            --text-secondary: #8892b0;
            --gradient-1: linear-gradient(135deg, #00ff88 0%, #00ccff 100%);
            --gradient-2: linear-gradient(135deg, #7c3aed 0%, #00ccff 100%);
            --gradient-quantum: linear-gradient(135deg, #7c3aed 0%, #ff00ff 50%, #00ccff 100%);
            --gradient-hybrid: linear-gradient(135deg, #00ff88 0%, #7c3aed 50%, #00ccff 100%);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Consolas', 'Monaco', monospace;
            background: var(--bg-darker);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
        }

        /* Animated Dot Background */
        .animated-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .dot-grid {
            position: absolute;
            width: 100%;
            height: 100%;
            background-image: radial-gradient(circle, rgba(0, 255, 136, 0.15) 1px, transparent 1px);
            background-size: 30px 30px;
            animation: dotMove 40s linear infinite;
        }

        @keyframes dotMove {
            0% { transform: translate(0, 0); }
            100% { transform: translate(30px, 30px); }
        }

        /* Header */
        .header {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 15px;
            padding: 20px 30px;
            margin: 20px;
            backdrop-filter: blur(15px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            position: relative;
            z-index: 10;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .brand-title {
            font-size: 24px;
            font-weight: bold;
            background: var(--gradient-1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: 2px;
        }

        .page-subtitle {
            color: var(--text-secondary);
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .header-right {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .agent-status {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 10px 20px;
            background: rgba(0, 255, 136, 0.1);
            border: 1px solid var(--primary);
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .agent-status:hover {
            background: rgba(0, 255, 136, 0.2);
            transform: translateY(-2px);
        }

        .logout-btn {
            background: transparent;
            border: 1px solid rgba(255, 0, 68, 0.3);
            border-radius: 8px;
            padding: 10px 20px;
            color: var(--danger);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .logout-btn:hover {
            background: rgba(255, 0, 68, 0.1);
        }

        /* Container */
        .container {
            position: relative;
            z-index: 1;
            max-width: 1800px;
            margin: 0 auto;
            padding: 0 20px 20px 20px;
        }

        /* Sub-Agent Status */
        .sub-agent-status {
            background: linear-gradient(135deg, rgba(0, 204, 255, 0.1) 0%, rgba(0, 255, 136, 0.05) 100%);
            border: 1px solid rgba(0, 204, 255, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .sub-agent-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .sub-agent-icon {
            width: 50px;
            height: 50px;
            background: var(--gradient-2);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            box-shadow: 0 4px 20px rgba(0, 204, 255, 0.3);
        }

        .sub-agent-details h3 {
            font-size: 18px;
            color: var(--secondary);
            margin-bottom: 5px;
        }

        .sub-agent-details p {
            font-size: 14px;
            color: var(--text-secondary);
        }

        .sub-agent-metrics {
            display: flex;
            gap: 30px;
        }

        .metric {
            text-align: center;
        }

        .metric-value {
            font-size: 24px;
            font-weight: bold;
            color: var(--secondary);
        }

        .metric-label {
            font-size: 12px;
            color: var(--text-secondary);
            text-transform: uppercase;
        }

        /* Compact Encryption Status */
        .encryption-compact {
            background: rgba(124, 58, 237, 0.1);
            border: 1px solid rgba(124, 58, 237, 0.3);
            border-radius: 8px;
            padding: 12px 20px;
            margin-bottom: 25px;
            text-align: center;
            font-size: 14px;
            color: var(--accent);
            font-weight: 600;
        }

        /* Real-time Analytics Dashboard */
        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .metric-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 15px;
            padding: 25px;
            backdrop-filter: blur(15px);
            transition: all 0.3s ease;
            text-align: center;
        }

        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 255, 136, 0.2);
        }

        .metric-icon {
            font-size: 36px;
            margin-bottom: 15px;
        }

        .metric-main-value {
            font-size: 32px;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 5px;
        }

        .metric-main-label {
            font-size: 14px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 10px;
        }

        .metric-change {
            font-size: 13px;
            font-weight: bold;
        }

        .change-positive {
            color: var(--success);
        }

        .change-negative {
            color: var(--danger);
        }

        /* Charts Section */
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .chart-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 15px;
            padding: 25px;
            backdrop-filter: blur(15px);
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .chart-title {
            font-size: 18px;
            font-weight: bold;
            color: var(--primary);
        }

        .chart-subtitle {
            font-size: 13px;
            color: var(--text-secondary);
            margin-top: 5px;
        }

        .chart-options {
            display: flex;
            gap: 10px;
        }

        .chart-option {
            padding: 5px 12px;
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            color: var(--text-secondary);
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .chart-option.active {
            background: var(--primary);
            color: var(--bg-darker);
            border-color: var(--primary);
        }

        .chart-area {
            height: 250px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: flex-end;
            padding: 20px;
        }

        /* Simple Bar Chart */
        .bar-chart {
            display: flex;
            align-items: flex-end;
            gap: 8px;
            height: 100%;
            width: 100%;
        }

        .bar {
            flex: 1;
            background: var(--primary);
            opacity: 0.8;
            border-radius: 4px 4px 0 0;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .bar:hover {
            opacity: 1;
            transform: translateY(-5px);
        }

        .bar.danger {
            background: var(--danger);
        }

        .bar.warning {
            background: var(--warning);
        }

        .bar.quantum {
            background: var(--accent);
        }

        /* AI Insights Section */
        .insights-section {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            backdrop-filter: blur(15px);
        }

        .insights-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .insights-title {
            font-size: 20px;
            font-weight: bold;
            color: var(--primary);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .insights-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .insight-card {
            background: linear-gradient(135deg, rgba(124, 58, 237, 0.1) 0%, rgba(0, 0, 0, 0.4) 100%);
            border: 1px solid rgba(124, 58, 237, 0.3);
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .insight-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(124, 58, 237, 0.3);
        }

        .insight-header-row {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .insight-icon {
            width: 40px;
            height: 40px;
            background: var(--gradient-2);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .insight-type {
            font-size: 13px;
            color: var(--accent);
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: bold;
        }

        .insight-content {
            font-size: 14px;
            line-height: 1.6;
            color: var(--text-primary);
            margin-bottom: 15px;
        }

        .insight-action {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .insight-metric {
            font-size: 18px;
            font-weight: bold;
            color: var(--primary);
        }

        .insight-button {
            padding: 8px 16px;
            background: transparent;
            border: 1px solid var(--accent);
            border-radius: 6px;
            color: var(--accent);
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .insight-button:hover {
            background: var(--accent);
            color: white;
        }

        /* Agent Coordination Panel */
        .coordination-panel {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            backdrop-filter: blur(15px);
        }

        .coordination-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .coordination-title {
            font-size: 18px;
            font-weight: bold;
            color: var(--primary);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .agent-flow {
            display: flex;
            align-items: center;
            justify-content: space-around;
            padding: 20px 0;
            flex-wrap: wrap;
            gap: 20px;
        }

        .agent-node {
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.6) 0%, rgba(124, 58, 237, 0.2) 100%);
            border: 2px solid var(--accent);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            min-width: 150px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .agent-node:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(124, 58, 237, 0.4);
        }

        .agent-node.main {
            border-color: var(--primary);
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.6) 0%, rgba(0, 255, 136, 0.2) 100%);
        }

        .agent-node-icon {
            font-size: 32px;
            margin-bottom: 10px;
        }

        .agent-node-name {
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--primary);
        }

        .agent-node-status {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .agent-flow-arrow {
            font-size: 24px;
            color: var(--accent);
            animation: flowPulse 2s ease-in-out infinite;
        }

        @keyframes flowPulse {
            0%, 100% { opacity: 0.5; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }

        /* AI Chat Widget */
        .ai-chat-widget {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
        }

        .ai-chat-toggle {
            width: 60px;
            height: 60px;
            background: var(--gradient-1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(0, 255, 136, 0.4);
            transition: all 0.3s ease;
            font-size: 28px;
        }

        .ai-chat-toggle:hover {
            transform: scale(1.1);
        }

        .ai-chat-window {
            position: absolute;
            bottom: 80px;
            right: 0;
            width: 400px;
            height: 600px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 20px;
            display: none;
            flex-direction: column;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(20px);
        }

        .ai-chat-window.active {
            display: flex;
            animation: chatSlideIn 0.3s ease;
        }

        @keyframes chatSlideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .ai-chat-header {
            background: var(--gradient-1);
            color: var(--bg-darker);
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: bold;
        }

        .ai-chat-status {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
        }

        .chat-status-dot {
            width: 8px;
            height: 8px;
            background: var(--bg-darker);
            border-radius: 50%;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.5); }
        }

        .ai-chat-close {
            cursor: pointer;
            font-size: 24px;
        }

        .cli-mode-indicator {
            background: rgba(255, 170, 0, 0.1);
            border: 1px solid var(--warning);
            border-radius: 8px;
            padding: 10px;
            margin: 0 20px;
            text-align: center;
            font-size: 12px;
            color: var(--warning);
            display: none;
        }

        .cli-mode-indicator.active {
            display: block;
        }

        .ai-chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .ai-message-bubble {
            background: rgba(0, 255, 136, 0.1);
            border: 1px solid var(--border);
            border-radius: 15px;
            padding: 15px 20px;
            max-width: 80%;
            word-wrap: break-word;
        }

        .ai-message-bubble.user {
            background: rgba(0, 204, 255, 0.1);
            border-color: var(--secondary);
            align-self: flex-end;
        }

        .ai-message-bubble.system {
            background: rgba(124, 58, 237, 0.1);
            border-color: var(--accent);
            font-size: 13px;
            font-style: italic;
        }

        .ai-message-time {
            font-size: 11px;
            color: var(--text-secondary);
            margin-top: 5px;
        }

        .ai-chat-input-container {
            padding: 20px;
            border-top: 1px solid var(--border);
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .ai-chat-input {
            flex: 1;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 12px 15px;
            color: var(--text-primary);
            font-size: 14px;
        }

        .ai-chat-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .ai-chat-send {
            background: var(--gradient-1);
            border: none;
            border-radius: 10px;
            padding: 12px 20px;
            color: var(--bg-darker);
            font-weight: bold;
            cursor: pointer;
            text-transform: uppercase;
        }

        /* Agent Shutdown Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            backdrop-filter: blur(5px);
        }

        .modal {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 40px;
            max-width: 500px;
            width: 90%;
            backdrop-filter: blur(20px);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from { opacity: 0; transform: translateY(-20px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        .modal-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .modal-title {
            font-size: 24px;
            font-weight: bold;
            color: var(--warning);
            margin-bottom: 10px;
        }

        .modal-content {
            color: var(--text-secondary);
            line-height: 1.6;
            margin-bottom: 30px;
        }

        .modal-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .modal-btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .modal-btn-primary {
            background: var(--gradient-1);
            color: var(--bg-darker);
        }

        .modal-btn-secondary {
            background: transparent;
            border: 2px solid var(--border);
            color: var(--text-secondary);
        }

        .modal-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }

        /* Mobile Responsive */
        @media (max-width: 1200px) {
            .charts-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .analytics-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .insights-grid {
                grid-template-columns: 1fr;
            }
            
            .agent-flow {
                flex-direction: column;
            }
            
            .agent-flow-arrow {
                transform: rotate(90deg);
            }
            
            .ai-chat-window {
                width: calc(100vw - 40px);
                height: calc(100vh - 120px);
                right: -20px;
                bottom: 80px;
            }
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--secondary);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary);
        }
    </style>
</head>
<body>
    <script>
        // Check authentication
        const auth = localStorage.getItem('sentinel_auth');
        if (!auth) {
            window.location.href = 'index.html';
        } else {
            const authData = JSON.parse(auth);
            if (Date.now() - authData.timestamp > 24 * 60 * 60 * 1000) {
                localStorage.removeItem('sentinel_auth');
                window.location.href = 'index.html';
            }
        }
    </script>

    <!-- Animated Background -->
    <div class="animated-bg">
        <div class="dot-grid"></div>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="header-left">
                <div>
                    <h1 class="brand-title">AI SENTINEL-X | SECURITY ANALYTICS</h1>
                    <p class="page-subtitle">AnalyticsEngine Sub-Agent Active</p>
                </div>
            </div>
            <div class="header-right">
                <div class="agent-status" onclick="showAgentShutdownModal()">
                    <span>🤖 AI Agent Active • Fully Autonomous</span>
                </div>
                <button class="logout-btn" onclick="handleLogout()">Logout</button>
            </div>
        </div>
    </header>

    <!-- Container -->
    <div class="container">
        <!-- Sub-Agent Status -->
        <div class="sub-agent-status">
            <div class="sub-agent-info">
                <div class="sub-agent-icon">📊</div>
                <div class="sub-agent-details">
                    <h3>AnalyticsEngine Sub-Agent</h3>
                    <p>Processing 2.4M metrics • ML predictions • Reports to Main Agent</p>
                </div>
            </div>
            <div class="sub-agent-metrics">
                <div class="metric">
                    <div class="metric-value" id="metricsProcessed">2.4M</div>
                    <div class="metric-label">Metrics/Hour</div>
                </div>
                <div class="metric">
                    <div class="metric-value">99.8%</div>
                    <div class="metric-label">Accuracy</div>
                </div>
                <div class="metric">
                    <div class="metric-value" id="predictions">847</div>
                    <div class="metric-label">Predictions Today</div>
                </div>
            </div>
        </div>

        <!-- Compact Encryption Status -->
        <div class="encryption-compact">
            🔒 CLASSICAL + QUANTUM ACTIVE
        </div>

        <!-- Real-time Analytics Dashboard -->
        <div class="analytics-grid">
            <div class="metric-card">
                <div class="metric-icon">🛡️</div>
                <div class="metric-main-value" id="threatsBlocked">12,487</div>
                <div class="metric-main-label">Threats Blocked</div>
                <div class="metric-change change-positive">↑ 18% from yesterday</div>
            </div>
            <div class="metric-card">
                <div class="metric-icon">⏱️</div>
                <div class="metric-main-value" id="avgResponse">12ms</div>
                <div class="metric-main-label">Avg Response Time</div>
                <div class="metric-change change-positive">↓ 3ms improvement</div>
            </div>
            <div class="metric-card">
                <div class="metric-icon">🎯</div>
                <div class="metric-main-value">99.8%</div>
                <div class="metric-main-label">Detection Accuracy</div>
                <div class="metric-change change-positive">↑ 0.2% increase</div>
            </div>
            <div class="metric-card">
                <div class="metric-icon">🌐</div>
                <div class="metric-main-value" id="devicesProtected">247</div>
                <div class="metric-main-label">Protected Devices</div>
                <div class="metric-change">No change</div>
            </div>
            <div class="metric-card">
                <div class="metric-icon">💾</div>
                <div class="metric-main-value">2.8TB</div>
                <div class="metric-main-label">Data Analyzed</div>
                <div class="metric-change change-positive">↑ 124GB today</div>
            </div>
            <div class="metric-card">
                <div class="metric-icon">🔐</div>
                <div class="metric-main-value">2.1M</div>
                <div class="metric-main-label">Crypto Ops/Sec</div>
                <div class="metric-change">Hybrid Active</div>
            </div>
        </div>

        <!-- Charts Section -->
        <div class="charts-grid">
            <div class="chart-card">
                <div class="chart-header">
                    <div>
                        <div class="chart-title">Threat Activity Timeline</div>
                        <div class="chart-subtitle">24-hour threat detection pattern</div>
                    </div>
                    <div class="chart-options">
                        <button class="chart-option active">24H</button>
                        <button class="chart-option">7D</button>
                        <button class="chart-option">30D</button>
                    </div>
                </div>
                <div class="chart-area">
                    <div class="bar-chart" id="threatChart">
                        <!-- Bars will be generated by JavaScript -->
                    </div>
                </div>
            </div>

            <div class="chart-card">
                <div class="chart-header">
                    <div>
                        <div class="chart-title">Attack Type Distribution</div>
                        <div class="chart-subtitle">Breakdown by threat category</div>
                    </div>
                </div>
                <div class="chart-area" style="justify-content: center; align-items: center;">
                    <div style="text-align: center;">
                        <div style="font-size: 48px; margin-bottom: 10px;">🎯</div>
                        <div style="color: var(--danger);">DDoS: 34%</div>
                        <div style="color: var(--warning);">SQL Injection: 23%</div>
                        <div style="color: var(--secondary);">XSS: 17%</div>
                        <div style="color: var(--accent);">Quantum: 26%</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Agent Coordination Panel -->
        <div class="coordination-panel">
            <div class="coordination-header">
                <h2 class="coordination-title">Sub-Agent Data Flow</h2>
            </div>
            <div class="agent-flow">
                <div class="agent-node" onclick="showAgentDetails('ThreatScanner')">
                    <div class="agent-node-icon">🛡️</div>
                    <div class="agent-node-name">ThreatScanner</div>
                    <div class="agent-node-status">147K events/sec</div>
                </div>
                <div class="agent-flow-arrow">→</div>
                <div class="agent-node main" onclick="showAgentDetails('MainAgent')">
                    <div class="agent-node-icon">🤖</div>
                    <div class="agent-node-name">Main Agent</div>
                    <div class="agent-node-status">Orchestrating</div>
                </div>
                <div class="agent-flow-arrow">→</div>
                <div class="agent-node" onclick="showAgentDetails('AnalyticsEngine')">
                    <div class="agent-node-icon">📊</div>
                    <div class="agent-node-name">AnalyticsEngine</div>
                    <div class="agent-node-status">ML Processing</div>
                </div>
            </div>
        </div>

        <!-- AI Insights Section -->
        <div class="insights-section">
            <div class="insights-header">
                <h2 class="insights-title">AI-Generated Insights</h2>
            </div>
            <div class="insights-grid">
                <div class="insight-card">
                    <div class="insight-header-row">
                        <div class="insight-icon">📈</div>
                        <div class="insight-type">TREND ANALYSIS</div>
                    </div>
                    <div class="insight-content">
                        Phishing attempts increased by 78% in the last 48 hours. Pattern suggests coordinated campaign targeting finance department. AnalyticsEngine predicts 94% chance of escalation.
                    </div>
                    <div class="insight-action">
                        <div class="insight-metric">78% ↑</div>
                        <button class="insight-button" onclick="viewInsight('phishing')">View Details</button>
                    </div>
                </div>

                <div class="insight-card">
                    <div class="insight-header-row">
                        <div class="insight-icon">🔍</div>
                        <div class="insight-type">ANOMALY DETECTED</div>
                    </div>
                    <div class="insight-content">
                        Unusual traffic pattern from Eastern Europe detected. 347 connection attempts from previously unknown IPs. ML model confidence: 87% malicious.
                    </div>
                    <div class="insight-action">
                        <div class="insight-metric">347</div>
                        <button class="insight-button" onclick="viewInsight('anomaly')">Investigate</button>
                    </div>
                </div>

                <div class="insight-card">
                    <div class="insight-header-row">
                        <div class="insight-icon">⚡</div>
                        <div class="insight-type">PERFORMANCE</div>
                    </div>
                    <div class="insight-content">
                        Response time optimization opportunity identified. AnalyticsEngine suggests caching strategy that could reduce latency by 15% without compromising security.
                    </div>
                    <div class="insight-action">
                        <div class="insight-metric">15%</div>
                        <button class="insight-button" onclick="viewInsight('optimization')">Apply Now</button>
                    </div>
                </div>

                <div class="insight-card">
                    <div class="insight-header-row">
                        <div class="insight-icon">🔮</div>
                        <div class="insight-type">PREDICTION</div>
                    </div>
                    <div class="insight-content">
                        Based on current patterns, AnalyticsEngine predicts DDoS attack within next 6 hours. Confidence: 82%. DefenseOrchestrator pre-positioning resources.
                    </div>
                    <div class="insight-action">
                        <div class="insight-metric">6h</div>
                        <button class="insight-button" onclick="viewInsight('prediction')">Prepare</button>
                    </div>
                </div>

                <div class="insight-card">
                    <div class="insight-header-row">
                        <div class="insight-icon">🔐</div>
                        <div class="insight-type">ENCRYPTION</div>
                    </div>
                    <div class="insight-content">
                        Hybrid encryption performing optimally. Quantum layer (Kyber + Dilithium) adds only 2.3ms latency. All analytics data protected against future quantum threats.
                    </div>
                    <div class="insight-action">
                        <div class="insight-metric">2.3ms</div>
                        <button class="insight-button" onclick="viewInsight('encryption')">Status</button>
                    </div>
                </div>

                <div class="insight-card">
                    <div class="insight-header-row">
                        <div class="insight-icon">🎯</div>
                        <div class="insight-type">ACCURACY</div>
                    </div>
                    <div class="insight-content">
                        ML model accuracy improved to 99.8% after latest training cycle. False positives reduced by 47%. AnalyticsEngine continuously learning from new patterns.
                    </div>
                    <div class="insight-action">
                        <div class="insight-metric">99.8%</div>
                        <button class="insight-button" onclick="viewInsight('accuracy')">Model Info</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Agent Shutdown Modal -->
    <div class="modal-overlay" id="agentShutdownModal" onclick="closeModalOnOverlay(event)">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">⚠️ Emergency AI Shutdown</h2>
            </div>
            <div class="modal-content">
                Pause autonomous mode? AI actions will be disabled, but manual control remains available through the AI chat bot. If external APIs or keys are offline, the agent will fallback to local control mode.
            </div>
            <div class="modal-actions">
                <button class="modal-btn modal-btn-primary" onclick="confirmAgentShutdown()">Confirm Shutdown</button>
                <button class="modal-btn modal-btn-secondary" onclick="closeModal()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- AI Chat Widget -->
    <div class="ai-chat-widget">
        <div class="ai-chat-window" id="aiChatWindow">
            <div class="ai-chat-header">
                <div class="ai-chat-status">
                    <span class="chat-status-dot"></span>
                    <span>MAIN AGENT ONLINE</span>
                </div>
                <span class="ai-chat-close" onclick="toggleChat()">×</span>
            </div>
            <div class="cli-mode-indicator" id="cliModeIndicator">
                ⚠️ CLI MODE - Main Agent Offline
            </div>
            <div class="ai-chat-messages" id="aiChatMessages">
                <div class="ai-message-bubble">
                    Connected to Main Agent. I can route commands to AnalyticsEngine for insights, predictions, and reports. All analytics data is protected with hybrid encryption.
                </div>
                <div class="ai-message-time">Just now</div>
            </div>
            <div class="ai-chat-input-container">
                <input 
                    type="text" 
                    class="ai-chat-input" 
                    id="aiChatInput" 
                    placeholder="Ask for analytics, predictions, or reports..."
                    onkeypress="handleChatKeyPress(event)"
                >
                <button class="ai-chat-send" onclick="sendChatMessage()">SEND</button>
            </div>
        </div>
        <div class="ai-chat-toggle" onclick="toggleChat()">🤖</div>
    </div>

    <script src="shared.js"></script>
    <script>
        // Initialize threat chart
        function initThreatChart() {
            const chartContainer = document.getElementById('threatChart');
            chartContainer.innerHTML = '';
            
            // Generate 24 bars for 24 hours
            for (let i = 0; i < 24; i++) {
                const bar = document.createElement('div');
                bar.className = 'bar';
                
                // Random height and threat level
                const height = Math.random() * 80 + 20;
                bar.style.height = height + '%';
                
                // Color based on threat level
                if (height > 70) {
                    bar.classList.add('danger');
                } else if (height > 50) {
                    bar.classList.add('warning');
                } else if (Math.random() > 0.9) {
                    bar.classList.add('quantum');
                }
                
                chartContainer.appendChild(bar);
            }
        }

        // Update metrics
        function updateMetrics() {
            // Update threats blocked
            const threats = document.getElementById('threatsBlocked');
            const current = parseInt(threats.textContent.replace(',', ''));
            threats.textContent = (current + Math.floor(Math.random() * 10)).toLocaleString();
            
            // Update predictions
            const predictions = document.getElementById('predictions');
            predictions.textContent = parseInt(predictions.textContent) + Math.floor(Math.random() * 3);
            
            // Update devices
            if (Math.random() > 0.9) {
                const devices = document.getElementById('devicesProtected');
                devices.textContent = parseInt(devices.textContent) + 1;
            }
        }

        // Show agent details
        function showAgentDetails(agent) {
            if (!chatOpen) {
                toggleChat();
            }
            
            setTimeout(() => {
                addChatMessage(`Routing to Main Agent for ${agent} information...`, false, 'system');
                
                setTimeout(() => {
                    const messages = {
                        'ThreatScanner': 'ThreatScanner is processing 147K events/second. It feeds threat data to AnalyticsEngine for pattern recognition and prediction. All data encrypted with AES-256-GCM + Kyber-1024.',
                        'MainAgent': 'Main Agent orchestrates all sub-agents. Currently coordinating: ThreatScanner → AnalyticsEngine → DefenseOrchestrator. All communications use hybrid encryption.',
                        'AnalyticsEngine': 'AnalyticsEngine (this sub-agent) processes 2.4M metrics/hour using ML models. Accuracy: 99.8%. Predictions protected with Dilithium-3 signatures.'
                    };
                    
                    addChatMessage(`Main Agent: ${messages[agent]}`, false);
                }, 800);
            }, 300);
        }

        // View insight details
        function viewInsight(type) {
            if (!chatOpen) {
                toggleChat();
            }
            
            setTimeout(() => {
                const insights = {
                    'phishing': 'AnalyticsEngine: Deep analysis shows phishing emails using new zero-font technique. Targets: CFO, Controller, AP Manager. Recommended action: Update email filters, alert finance team.',
                    'anomaly': 'AnalyticsEngine: Traffic originates from 185.220.101.0/24 (known Tor exit nodes). Pattern matches cryptocurrency mining botnet. DefenseOrchestrator blocking range.',
                    'optimization': 'AnalyticsEngine: Cache frequently accessed threat signatures in memory. Reduces database queries by 67%. Implementation requires 2GB RAM. No security impact.',
                    'prediction': 'AnalyticsEngine: DDoS indicators - increasing SYN packets, suspicious geographic distribution, previous attack pattern match. Confidence intervals: 82% ±5%.',
                    'encryption': 'AnalyticsEngine: Hybrid encryption metrics - Classical: 1.5ms avg, Quantum: 2.3ms avg. Total overhead: 3.8ms. Processing 2.1M crypto operations/second.',
                    'accuracy': 'AnalyticsEngine: Model v3.2.1 trained on 147M samples. Improvements: 47% fewer false positives, 12% faster inference. Next training: 6 hours.'
                };
                
                addChatMessage(`Routing to AnalyticsEngine sub-agent...`, false, 'system');
                setTimeout(() => {
                    addChatMessage(insights[type], false);
                }, 800);
            }, 300);
        }

        // Logout handler
        function handleLogout() {
            if (confirm('Logout? The AI agent will continue protecting your systems.')) {
                localStorage.removeItem('sentinel_auth');
                window.location.href = 'index.html';
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            initThreatChart();
            
            // Update metrics periodically
            setInterval(updateMetrics, 3000);
            
            // Refresh chart
            setInterval(() => {
                if (Math.random() > 0.8) {
                    initThreatChart();
                }
            }, 10000);
        });
    </script>
</body>
</html>
